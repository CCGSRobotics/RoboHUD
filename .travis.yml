language: 
  - node_js
  - python
node_js:
  - "10.16.0"
python:
  - "3.6"
cache: 
  - yarn
  - pip
sudo: true
before_script:
  export TZ=Australia/Perth
jobs:
  allow_failures:
   - script: python3 Scripts/lint.py
  include:
    - stage: Lint
      script: yarn
      script: python3 Scripts/lint.py
    - stage: Build & release
      script: yarn
      script: yarn run pack
      deploy:
        provider: releases
        api_key: $personal_access_token
        skip_cleanup: true
        file:
          - dist/robohud*.AppImage
        name: Automatic Travis build on $(date +'%d.%m.%Y  at %R')
        draft: true
        prerelease: true
        body: "Build automatically generated by Travis CI"
        on:
          tags: true
